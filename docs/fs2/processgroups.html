<!DOCTYPE html><html><head><title>prox: Process groups</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Daniel Vigovszky" /><meta name="description" content="A Scala library for working with system processes" /><meta name="og:image" content="https://vigoo.github.io/prox/img/poster.png" /><meta name="image" property="og:image" content="https://vigoo.github.io/prox/img/poster.png" /><meta name="og:title" content="prox: Process groups" /><meta name="title" property="og:title" content="prox: Process groups" /><meta name="og:site_name" content="prox" /><meta name="og:url" content="https://vigoo.github.io/prox/" /><meta name="og:type" content="website" /><meta name="og:description" content="A Scala library for working with system processes" /><link rel="icon" type="image/png" href="https://vigoo.github.io/prox/img/favicon.png" /><meta name="twitter:title" content="prox: Process groups" /><meta name="twitter:image" content="https://vigoo.github.io/prox/img/poster.png" /><meta name="twitter:description" content="A Scala library for working with system processes" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:creator" content="@dvigovszky" /><link rel="icon" type="image/png" sizes="16x16" href="https://vigoo.github.io/prox/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="https://vigoo.github.io/prox/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="https://vigoo.github.io/prox/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="https://vigoo.github.io/prox/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="https://vigoo.github.io/prox/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="https://vigoo.github.io/prox/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="https://vigoo.github.io/prox/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="https://vigoo.github.io/prox/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="https://vigoo.github.io/prox/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="https://vigoo.github.io/prox/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="https://vigoo.github.io/prox/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="https://vigoo.github.io/prox/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="https://vigoo.github.io/prox/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="https://vigoo.github.io/prox/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="https://vigoo.github.io/prox/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="https://vigoo.github.io/prox/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="https://vigoo.github.io/prox/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="https://vigoo.github.io/prox/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="https://vigoo.github.io/prox/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="https://vigoo.github.io/prox/img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="https://vigoo.github.io/prox/highlight/styles/vs.css" /><link rel="stylesheet" href="/prox/css/light-style.css" /><script async="async">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-56320875-3' , 'auto');
ga('send', 'pageview');
      </script></head><body class="docs"><div id="wrapper">
<div id="sidebar-wrapper">
<div id="sidebar-brand">
<a href="/prox/" class="brand"><div class="brand-wrapper"></div>
<span>prox</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button>
</div>
<div class="sidebar-nav"> <div class="sidebar-nav-item  "><a href="/prox/index" title="Home" class="">Home</a></div> <div class="sidebar-nav-item  open">
<a href="/prox/docs/fs2/index.html" title="Cats Effect / FS2" class="drop-nested">Cats Effect / FS2</a><i class="fa fa-angle-right"></i><div class="sub-section"> <a href="/prox/docs/fs2/index.html" title="Getting started" class="">Getting started</a> <a href="/prox/docs/fs2/customize.html" title="Customizing environment" class="">Customizing environment</a> <a href="/prox/docs/fs2/redirection.html" title="Redirection" class="">Redirection</a> <a href="/prox/docs/fs2/processgroups.html" title="Process groups" class="active">Process groups</a> <a href="/prox/docs/fs2/running.html" title="Running processes" class="">Running processes</a> <a href="/prox/docs/fs2/custom-runners.html" title="Custom runners" class="">Custom runners</a>
</div>
</div> <div class="sidebar-nav-item  ">
<a href="/prox/docs/zstream/index.html" title="ZIO / ZStream" class="drop-nested">ZIO / ZStream</a><i class="fa fa-angle-right"></i><div class="sub-section"> <a href="/prox/docs/zstream/index.html" title="Getting started" class="">Getting started</a> <a href="/prox/docs/zstream/customize.html" title="Customizing environment" class="">Customizing environment</a> <a href="/prox/docs/zstream/redirection.html" title="Redirection" class="">Redirection</a> <a href="/prox/docs/zstream/processgroups.html" title="Process groups" class="">Process groups</a> <a href="/prox/docs/zstream/running.html" title="Running processes" class="">Running processes</a> <a href="/prox/docs/zstream/custom-runners.html" title="Custom runners" class="">Custom runners</a>
</div>
</div> <div class="sidebar-nav-item  "><a href="/prox/docs/migration.html" title="Migration" class="">Migration</a></div> <div class="sidebar-nav-item  "><a href="/prox/docs/blogposts.html" title="Blog posts" class="">Blog posts</a></div> <div class="sidebar-nav-item  "><a href="/prox/api/io/github/vigoo/prox/" title="API reference" class="">API reference</a></div>
</div>
</div>
<div id="page-content-wrapper">
<div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12">
<div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div>
<ul class="pull-right">
<li class="search-nav"><div id="search-dropdown">
<label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)"><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul>
</div></li>
<li id="gh-eyes-item" class="hidden-xs to-uppercase"><a href="https://github.com/vigoo/prox" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li>
<li id="gh-stars-item" class="hidden-xs to-uppercase"><a href="https://github.com/vigoo/prox" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li>
</ul>
</div></div></div></div>
<div id="content" data-github-owner="vigoo" data-github-repo="prox"><div class="content-wrapper"><section><h1 id="connecting-processes-together-via-pipes">Connecting processes together via pipes</h1>

<p>Connecting one process to another means that the standard output of the first process
gets redirected to the standard input of the second process. This is implemented using
the redirection capabilities described <a href="redirection">on the redirection page</a>. The result
of connecting one process to another is called a <em>process group</em> and it implements the 
trait <code class="highlighter-rouge">ProcessGroup[O, E]</code>.</p>

<p>To create a process group, either:</p>
<ul>
  <li>Use the <code class="highlighter-rouge">|</code> or <code class="highlighter-rouge">via</code> methods between two <strong>unbounded</strong> processes</li>
  <li>Use the <code class="highlighter-rouge">|</code> or <code class="highlighter-rouge">via</code> methods between an <strong>unbounded</strong> process group and an <strong>unbounded</strong> process</li>
</ul>

<p>It is important that the process group construction must always happen before any redirection,
the type system enforces this by requiring the involved processes to be <code class="highlighter-rouge">UnboundedProcess</code>.</p>

<blockquote>
  <p><img class="emoji" title=":bulb:" alt=":bulb:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png" height="20" width="20"> <code class="highlighter-rouge">Process.UnboundedProcess</code> is a type alias for a process with all the redirection capabilities</p>
</blockquote>

<p>Letâ€™s see an example of simply piping:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">group1</span> <span class="k">=</span> <span class="nc">Process</span><span class="o">(</span><span class="s">"grep"</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="s">"ERROR"</span><span class="o">))</span> <span class="o">|</span> <span class="nc">Process</span><span class="o">(</span><span class="s">"sort"</span><span class="o">)</span>
<span class="k">val</span> <span class="nv">group2</span> <span class="k">=</span> <span class="n">group1</span> <span class="o">|</span> <span class="nc">Process</span><span class="o">(</span><span class="s">"uniq"</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="s">"-c"</span><span class="o">))</span>
</code></pre></div></div>

<p>A custom pipe (when using <code class="highlighter-rouge">via</code>) can be anything of the type <code class="highlighter-rouge">Pipe[F, Byte, Byte]</code>. The
following not very useful example capitalizes each word coming through:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">customPipe</span><span class="k">:</span> <span class="kt">fs2.Pipe</span><span class="o">[</span><span class="kt">IO</span>, <span class="kt">Byte</span>, <span class="kt">Byte</span><span class="o">]</span> <span class="k">=</span>
    <span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">fs2.Stream</span><span class="o">[</span><span class="kt">IO</span>, <span class="kt">Byte</span><span class="o">])</span> <span class="k">=&gt;</span> <span class="n">s</span>
      <span class="o">.</span><span class="py">through</span><span class="o">(</span><span class="nv">fs2</span><span class="o">.</span><span class="py">text</span><span class="o">.</span><span class="py">utf8Decode</span><span class="o">)</span> <span class="c1">// decode UTF-8</span>
      <span class="o">.</span><span class="py">through</span><span class="o">(</span><span class="nv">fs2</span><span class="o">.</span><span class="py">text</span><span class="o">.</span><span class="py">lines</span><span class="o">)</span>      <span class="c1">// split to lines</span>
      <span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">split</span><span class="o">(</span><span class="sc">' '</span><span class="o">).</span><span class="py">toVector</span><span class="o">)</span>   <span class="c1">// split lines to words</span>
      <span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="n">v</span> <span class="k">=&gt;</span> <span class="nv">v</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">capitalize</span><span class="o">).</span><span class="py">mkString</span><span class="o">(</span><span class="s">" "</span><span class="o">))</span>
      <span class="o">.</span><span class="py">intersperse</span><span class="o">(</span><span class="s">"\n"</span><span class="o">)</span>            <span class="c1">// remerge lines </span>
      <span class="o">.</span><span class="py">through</span><span class="o">(</span><span class="nv">fs2</span><span class="o">.</span><span class="py">text</span><span class="o">.</span><span class="py">utf8Encode</span><span class="o">)</span> <span class="c1">// encode as UTF-8</span>

<span class="k">val</span> <span class="nv">group3</span> <span class="k">=</span> <span class="nc">Process</span><span class="o">(</span><span class="s">"echo"</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="s">"hello world"</span><span class="o">)).</span><span class="py">via</span><span class="o">(</span><span class="n">customPipe</span><span class="o">).</span><span class="py">to</span><span class="o">(</span><span class="nc">Process</span><span class="o">(</span><span class="s">"wc"</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="s">"-w"</span><span class="o">)))</span>
</code></pre></div></div>
</section></div></div>
</div>
</div><script src="https://vigoo.github.io/prox/highlight/highlight.pack.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/sbt.min.js"></script><script src="https://vigoo.github.io/prox/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash','scala','sbt']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script src="https://vigoo.github.io/prox/js/search.js"></script><script src="/prox/js/docs.js"></script></body></html>